{% extends 'tasks/basic.html' %}

{% block title %}
    Списки
{% endblock %}
{% block list_button %}
    <div class="dropdown-menu">
        {% for list in lists %}
            <div style="display: flex; margin: 5px">
                <form method="post" action="{% url 'send-via-email' list.id %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-primary">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-mailbox" fill="currentColor"
                             xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                  d="M4 4a3 3 0 0 0-3 3v6h6V7a3 3 0 0 0-3-3zm0-1h8a4 4 0 0 1 4 4v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a4 4 0 0 1 4-4zm2.646 1A3.99 3.99 0 0 1 8 7v6h7V7a3 3 0 0 0-3-3H6.646z"></path>
                            <path fill-rule="evenodd"
                                  d="M11.793 8.5H9v-1h5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.354-.146l-.853-.854z"></path>
                            <path d="M5 7c0 .552-.448 0-1 0s-1 .552-1 0a1 1 0 0 1 2 0z"></path>
                        </svg>
                    </button>
                </form>
                <a class="dropdown-item" href="{% url 'tasks' list.id %}">{{ list }}</a>
                <form method="post" action="{% url 'delete-list' list.id %}">
                    {% csrf_token %}
                    <input type="submit" class="btn btn-sm btn-danger" value="Удалить">
                </form>
            </div>
        {% endfor %}
        <div class="dropdown-divider"></div>
        <a class="dropdown-item">Создать новый:</a>
        <a class="dropdown-item">
            <form method="POST" action="/">
              {% csrf_token %}
              {{form.title}}
              <input class="btn btn-info" type="submit" name="Create TaskList" value="Создать">
            </form>
        </a>
    </div>
{% endblock %}

{% block main %}
    <div class="center-column">
        <div class="alert alert-primary" role="alert" >
            {% if user.is_authenticated %}
                Зайдите в выпадающие меню "Мои списки" и создайте первый список!
            {% else %}
                Зарегистрируйтесь или войдите, чтобы начать
            {% endif %}
        </div>
        {% if messages %}
            <div class="alert alert-primary">
            {% for message in messages %}
                <p class="form-control" style="color: firebrick">{{ message }}</p>
            {% endfor %}
        </div>
        {% endif %}
    </div>
{% endblock %}